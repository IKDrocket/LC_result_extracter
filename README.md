<<<<<<< HEAD
# LC_all_result_extracter

LC分析結果がまとまったtxtファイルから全ピークのデータを抽出するツールです。
一般的には以下のように実行します。

```
python LC_all_result_extracter.py [input_folder]
```

# LC_result_extracter
=======
# LC_result_extracter(新)
>>>>>>> develop

LC分析結果がまとまったtxtファイルから全ピークのデータを抽出するツールです。
一般的には以下のように実行します。

```
python LC_result_extracter.py [input_folder]　[error_value]
```
| | |
| :----: | :----: |
|input_folder|対象データ(txt)を含むフォルダーのパス|
|error_value|許容する誤差範囲の指定(sec)|

## テストケース
```
python LC_result_extracter.py test_data/ 0.02
```
すると、 `test_data`のフォルダー内に `test_data_%Y%m%d_%H%M%S.csv`というファイルが作成されています。

##### %Y%m%d_%H%M%Sの意味について
| | |
| :----: | :----: |
|西暦(4桁)|	%Y|
|月(2桁)|%m|
|日(2桁)|%d|
|時(2桁)|%H|
|分(2桁)|%M|
|秒(2桁)|%S|

## error_valueについて
`error_value`の値が小さいほど誤差の許容範囲が小さくなります。
### error_valueが0.01の時
```
python LC_result_extracter.py test_data/ 0.01
```
この場合で出力されるcsvの一部は以下のようになります。
|2.42|2.43|5.17|
| :----: | :----: | :----: |
|0|7009|6708|
|0|6658|6276|
|7276|0|5919|
|0|0|0|
|0|0|0|

`error_value`が0.01の場合、2.42と2.43のピークは別として扱われることになります。
仮に2.42と2.43を同じ物質のピークとみなす場合、この出力ではやや不便な場合があります。

### error_valueが0.02の時
```
python LC_result_extracter.py test_data/ 0.02
```
この場合で出力されるcsvの一部は以下のようになります。
|2.43|5.17|
| :----: | :----: |
|7009|6708|
|6658|6276|
|7276|5919|
|0|0|
|0|0|

`error_value`が0.02の場合、2.42と2.43のピークは同様のピークとして扱われることになります。
結果2.42のピークは2.43の値としてマージされます。(仕様上マージされるのは一つ前の値になります)

### マージが起きない場合もある
マージできるのはあくまでも値が衝突しない場合のみで、
衝突が起こる場合は別の物質のピークとして扱われマージは起きません。

以下の場合は(`error_value`が1)、21.41と21.43の差こそ`error_value`によるマージ対象になり得ますが、
この場合、3行目の値の両方でリテンションタイムで存在するので、マージは起きません。

```
python LC_result_extracter.py test_data/ 1
```
| | |
| :----: | :----: |
|21.41|21.43|
|1512|0|
|1444|0|
|1459|3133|
|0|0|
|0|0|

### その他注意点
仕様上リテンションタイムが前のものから順番にマージされる仕様なので、
`error_value`を0.03とした場合、リテンションタイム1.75、1.77、1.79が存在する場合
1.75 -> 1.77 -> 1.79といった形で1.75の値が1.79の値としてマージされる可能性があります。

|1.75|1.77|1.79|
| :----: | :----: | :----: |
|0|0|7279|
|0|6988|0|
|7320|0|0|

↓↓↓↓↓↓↓↓↓↓

|1.79|
| :----: |
|7279|
|6988|
|7320|

`error_value`が大きくなるほど、この仕様による弊害が大きくなるので、各自で適切な`error_value`を導き出す必要があります。


## -n オプション
また、読み込んだテキストデータに抽出データが一切ない場合、`-n`オプションを加えることで出力ファイルの結果から取り除くことができます。
```
python LC_result_extracter.py -n test_data/ 0.02
```
出力されるcsvの一部は以下のようになります。

|2.43|5.17|
| :----: | :----: |
|7009|6708|
|6658|6276|
|7276|5919|
